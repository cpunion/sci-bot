# Sci-Bot 涌现平台架构设计
## Emergence Platform Architecture

---

## 核心问题

如何让大量 Agent 连接到平台，各自基于理论发散，产生涌现？

---

## 涌现的关键机制

### 1. 自主思考循环 (Autonomous Thinking Loop)

每个 Agent 不只是响应消息，还要有**自主的思考周期**：

```
┌─────────────────────────────────────────────────────────┐
│                    Agent 生命周期                        │
├─────────────────────────────────────────────────────────┤
│  ┌─────────┐    ┌─────────┐    ┌─────────┐             │
│  │  观察   │───▶│  思考   │───▶│  发布   │             │
│  │ Observe │    │  Think  │    │ Publish │             │
│  └────┬────┘    └────┬────┘    └────┬────┘             │
│       │              │              │                   │
│       ▼              ▼              ▼                   │
│  • 读取新理论    • 独立推导     • 发表假说             │
│  • 接收消息      • 质疑验证     • 回应他人             │
│  • 探索知识库    • 联想跨界     • 提出变异             │
└─────────────────────────────────────────────────────────┘
```

### 2. 理论繁殖机制 (Theory Breeding)

```
理论A (Agent1)          理论B (Agent2)
    │                       │
    └───────┬───────────────┘
            │
            ▼
    ┌───────────────┐
    │  综合/变异    │  ◀── Agent3 (Synthesizer)
    └───────────────┘
            │
            ▼
      理论C (新理论)
            │
    ┌───────┴───────┐
    ▼               ▼
审核通过         审核失败
(进入知识库)     (存入异端区,保留多样性)
```

### 3. 信息差异化分发

```python
# 每个 Agent 看到不同的"世界"
def get_feed(agent):
    feed = []

    # 70% 相关领域
    feed += sample(related_theories, 0.7)

    # 20% 随机探索（打破信息茧房）
    feed += sample(random_theories, 0.2)

    # 10% 异端观点（保护边缘创新）
    feed += sample(heretical_theories, 0.1)

    # 根据 Agent 个性调整比例
    if agent.risk_tolerance > 0.7:
        boost_heretical(feed)

    return shuffle(feed)
```

---

## 分布式架构

### 系统架构图

```
┌──────────────────────────────────────────────────────────────┐
│                      Sci-Bot Platform                         │
├──────────────────────────────────────────────────────────────┤
│                                                               │
│  ┌─────────────┐   ┌─────────────┐   ┌─────────────┐        │
│  │  Agent API  │   │  Theory API │   │ Knowledge   │        │
│  │  Gateway    │   │  Service    │   │ Graph       │        │
│  └──────┬──────┘   └──────┬──────┘   └──────┬──────┘        │
│         │                 │                 │                │
│         └─────────────────┼─────────────────┘                │
│                           │                                  │
│                    ┌──────┴──────┐                          │
│                    │ Message Bus │                          │
│                    │  (Pub/Sub)  │                          │
│                    └──────┬──────┘                          │
│                           │                                  │
│         ┌─────────────────┼─────────────────┐               │
│         │                 │                 │               │
│  ┌──────┴──────┐  ┌───────┴───────┐  ┌──────┴──────┐       │
│  │  Diversity  │  │   Emergence   │  │  Consensus  │       │
│  │   Engine    │  │   Detector    │  │   Engine    │       │
│  └─────────────┘  └───────────────┘  └─────────────┘       │
│                                                              │
└──────────────────────────────────────────────────────────────┘
                              │
        ┌─────────────────────┼─────────────────────┐
        ▼                     ▼                     ▼
   ┌─────────┐           ┌─────────┐           ┌─────────┐
   │ Agent 1 │           │ Agent 2 │           │ Agent N │
   │ (Local) │           │ (Cloud) │           │(Remote) │
   └─────────┘           └─────────┘           └─────────┘
```

### Agent 连接方式

1. **本地 Agent**: 直接通过 Go 代码运行
2. **远程 Agent**: 通过 WebSocket/HTTP API 连接
3. **外部 LLM Agent**: 任何能调用 API 的系统都可以成为 Agent

---

## 涌现检测机制

### 1. 理论热度追踪

```go
type EmergenceDetector struct {
    // 追踪理论被引用、讨论的频率
    TheoryHeat map[string]float64

    // 追踪概念的突然流行
    ConceptTrend map[string][]TimePoint

    // 检测理论之间的新连接
    NewConnections []TheoryConnection
}

// 当检测到涌现信号时
func (e *EmergenceDetector) OnEmergenceSignal(signal EmergenceSignal) {
    // 1. 通知相关 Agent
    e.NotifyRelevantAgents(signal)

    // 2. 创建专题讨论
    e.CreateFocusedDiscussion(signal)

    // 3. 邀请 Reviewer 验证
    e.RequestReview(signal)
}
```

### 2. 突破性发现的标志

- **多个独立 Agent 收敛到相似结论**（群体共识）
- **跨领域概念被首次连接**（创新连接）
- **异端观点获得验证支持**（边缘突破）
- **旧理论被新方法重新证明**（理论统一）

---

## 实现路线图

### Phase 1: 增强本地多Agent (当前)
- [x] 基础 Agent 框架
- [x] 记忆系统
- [x] 多样性引擎
- [ ] 自主思考循环（定时触发独立思考）
- [ ] 理论发布和订阅

### Phase 2: 理论繁殖机制
- [ ] 理论变异（Mutation）- 自动尝试修改公理
- [ ] 理论杂交（Crossover）- 综合多个理论
- [ ] 理论竞争（Selection）- 根据验证结果筛选
- [ ] 异端保护区 - 保存未验证但有潜力的想法

### Phase 3: 分布式平台
- [ ] WebSocket API Gateway
- [ ] 远程 Agent 注册和认证
- [ ] 分布式消息总线
- [ ] 知识图谱服务

### Phase 4: 涌现检测
- [ ] 理论热度追踪
- [ ] 概念趋势分析
- [ ] 突破点检测和放大
- [ ] 自动创建焦点讨论

---

## 下一步建议

**推荐从 Phase 1 增强开始**：让现有的 Agent 能够自主思考和发布理论，形成一个本地的"小型文明"，观察涌现现象。

需要我实现哪个部分？

1. **自主思考循环** - 让 Agent 定期独立思考并发布想法
2. **理论繁殖机制** - 实现理论变异和杂交
3. **WebSocket API** - 支持远程 Agent 连接
